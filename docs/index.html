<html>
<head>
<title>
	SDAPScreator
</title>
<!--
#################################################
# SDAPScreator
# Javascript Software Package
# email: niehaus@uni-landau.de
# created               8.8.2014
# last modifications    8.8.2014
# Author:  Engelbert Niehaus, Joerg Rapp
# GNU Public License
#################################################
-->
  <meta http-equiv="Content-Type" content="text/html; charset=utf8">

<!---IMPORT OF LIBRARY FOR CLASS: String/URL_Object -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/string.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: Matrix -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/matrix.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: Wizzard -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/wizzard.js">
</SCRIPT>
<!-- IMPORT OF LIBRARY FOR CLASS: QTemplates -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/qtemplates.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: QNode -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/qnode.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: QNodeList -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/qnodelist.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: Questionnaire -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/questionnaire.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: XMLparser -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/xmlparser.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: FileLoader -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/fileloader.js">
</SCRIPT>
<!---IMPORT OF LIBRARY FOR CLASS: Generate All Objects -->
<SCRIPT LANGUAGE="JavaScript" SRC="library/objectgenerate.js">
</SCRIPT>

<!--Create Objects---------------------->
<SCRIPT LANGUAGE="JavaScript">

//#################################################################
//# Javascript Class: SDAPScreator()
//#
//#   Class Filename: index.html
//#
//# Author of Class:      Joerg Rapp
//# email:                rapp@uni-landau.de
//# created               14.10.2014
//# last modifications    14.10.2014
//# GNU Public License - OpenSource
//# created with JavaScript Class Generator by Engelbert Niehaus
//#################################################################

function SDAPScreator() {
	//---Attributes-------------------------
	this.aQuestionnaire = new Questionnaire();
	this.aFileLoader = new FileLoader();
	this.wizzard = new Wizzard();
	this.aFileOfQuestions = "";
	this.aQNodePath = "this.aQuestionnaire.aQuestions";
	this.aSelectedQNodePath = "this.aQuestionnaire.aQuestions";
	this.aImportCall = this.aQNodePath+".importQNode(pQNode)";
	this.aEditCall   = this.aQNodePath+".getEdit_Template_HTML()";
	//this.aInfoValue = new InfoValue();
	// this.aSingleMark = new SingleMark();
	// this.aChoiceItem = new ChoiceItem();
	// this.aChoiceItemText = new ChoiceItemText();
	// this.aChoiceMulticolItem = new ChoiceMulticolItem();
	// this.aCheckbox = new Checkbox();
	// this.aTextbox = new Textbox();
	// this.aMarkGroup = new MarkGroup();
	//this.aChoiceGroup = new ChoiceGroup();

	//---Methods----------------------------
	this.init			 	   = init_SDAPScreator;
	this.editQNode			   = editQNode_SDAPScreator;
	this.addNewQNode		   = addNewQNode_SDAPScreator;
	this.importQNode		   = importQNode_SDAPScreator;
	this.deleteQNode		   = deleteQNode_SDAPScreator;
	this.loadQNode			   = loadQNode_SDAPScreator;
	this.saveQNode			   = saveQNode_SDAPScreator;
	this.moveQNode			   = moveQNode_SDAPScreator;
	this.setTimeout			   = setTimeout_SDAPScreator;
	this.set_form_templates    = set_form_templates_SDAPScreator;
	this.updateQuestionnaire   = updateQuestionnaire_SDAPScreator;
	this.updateQNodeVariables  = updateQNodeVariables_SDAPScreator;
	this.getEdit_Template_HTML = getEdit_Template_HTML_SDAPScreator;
	this.Load_Questionnaire = Load_Questionnaire_SDAPScreator;
	this.Show_Questionnaire = Show_Questionnaire_SDAPScreator;
	this.Edit_Structure     = Edit_Structure_SDAPScreator;
	this.Edit_Questionnaire = Edit_Questionnaire_SDAPScreator;
	this.Save_Questionnaire = Save_Questionnaire_SDAPScreator;
	this.Export_Latex = Export_Latex_SDAPScreator;
	this.Export_HTML = Export_HTML_SDAPScreator;
	this.Debug = Debug_SDAPScreator;

	this.load_default = function (pQuestionnaire) {
		pQuestionnaire = pQuestionnaire || 'questionnaire0root.html';
		top.main.document.location='questionnaires/'+pQuestionnaire;
	}
}

//---------------------------------------------------------------------
//----Attributes-------------------------------------------------------
// If you want to access the attributes of SDAPScreator, use
// the attribute name with a leading "this.", e.g.
// this.myattrib3 = "Hello World";
//---------------------------------------------------------------------
//----Methodes---------------------------------------------------------
// In the definition of the methods of  'SDAPScreator'
// the function name is extended with '_SDAPScreator'.
// This is done to avoid name space conflicts, if you overwrite a
// method 'my_method()' that was inherited from a superclass 'MySuperClass' e.g.
//   SuperClass: MySuperClass.my_method()
//   Class:       SDAPScreator.my_method()
// The method definitions are as follows
//   function my_method_SDAPScreator(...) { .....
// and
//   function my_method_MySuperClass(...) { .....
//---------------------------------------------------------------------
//---Methods of Class "SDAPScreator()" defined as JS functions
//---------------------------------------------------------------------


//#################################################################
//# Method: init
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               15.10.2014
//# last modifications    15.10.2014
//#################################################################

function init_SDAPScreator() {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:init()-Call")
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.init();
	//-------------------------------------------------------
	this.aQuestionnaire.init_form('top.main.document.fInputForm','top.vSDAPScreator.aQuestionnaire');
	this.aQuestionnaire.init();
	this.aQuestionnaire.init_parent(this);
	this.aFileLoader.init_parent(this);

}
//----End of Method init Definition



//#################################################################
//# Method: editQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function editQNode_SDAPScreator(pObjectPath,pCall) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:167 - CALL \n  editQNode('"+pObjectPath+"') ");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.editQNode(pObjectPath);
	//-------------------------------------------------------
	//this.aEditCall = pObjectPath+".getEdit_Template_HTML()";
    this.aEditCall = pObjectPath+"."+pCall;
    this.aSelectedQNodePath = pObjectPath;
    var vFilename =  "frames/editqnode.html";
    if (pCall.indexOf("Template")>0) {
    	vFilename =  "frames/edittemplates.html";
    }
    top.setTimeout("top.main.document.location.href='"+vFilename+"'",300);

}
//----End of Method editQNode Definition

//#################################################################
//# Method: set_form_templates
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function set_form_templates_SDAPScreator() {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:199 - CALL \n  set_form_templates() ");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.set_form_templates();
	//-------------------------------------------------------
	//this.aEditCall = pObjectPath+".getEdit_Template_HTML()";
    var vEval = this.aSelectedQNodePath + ".aTemplates.set_all_formvalue()";
    alert("sdapscreator.js:207 - CALL \n  set_form_templates()\nvEval="+vEval);
	eval(vEval);
    //top.setTimeout(vEval,300);

}
//----End of Method editQNode Definition

//#################################################################
//# Method: saveQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function saveQNode_SDAPScreator(pObjectPath) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:193 - CALL \n  saveQNode('"+pObjectPath+"') ");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.saveQNode(pObjectPath);
	//-------------------------------------------------------
	//this.aEditCall = pObjectPath+".getEdit_Template_HTML()";
    this.aQNodePath = pObjectPath;
    var vFilename =  "frames/saveqnode.html";
    top.setTimeout("top.main.document.location.href='"+vFilename+"'",300);

}
//----End of Method saveQNode Definition

//#################################################################
//# Method: updateQNodeVariables
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function updateQNodeVariables_SDAPScreator(pSaveHash) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:219 - CALL \n  updateQNodeVariables(pSaveHash) ");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.updateQNodeVariables(pObjectPath);
	//-------------------------------------------------------
	//this.aEditCall = pObjectPath+".getEdit_Template_HTML()";
    var vEval = this.aQNodePath + ".getSaveQNodeHash(pSaveHash)";
    eval(vEval);
}
//----End of Method updateQNodeVariables Definition


//#################################################################
//# Method: getEdit_Template_HTML
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function getEdit_Template_HTML_SDAPScreator() {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:190 - CALL \n  getEdit_Template_HTML() ");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.getEdit_Template_HTML(pObjectPath);
	//-------------------------------------------------------
	//this.aQNodePath = "this.aQuestionnaire.aQuestions";
	//this.aImportCall = this.aQNodePath+".importQNode(pQNode)";
	//this.aEditCall   = this.aQNodePath+".getEdit_Template_HTML()";
	var vReturn = "";
	var vEval = "vReturn = "+ this.aEditCall;
	//alert("sdapscreator.js:200 - CALL \n  getEdit_Template_HTML()\nvEval.\n"+vEval);
	eval(vEval);

	return vReturn;
}
//----End of Method getEdit_Template_HTML Definition


//#################################################################
//# Method: addNewQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function addNewQNode_SDAPScreator(pImportCall) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:152 - CALL \n  addNewQNode('"+pImportCall+"') ");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.addNewQNode(pImportCall);
	//-------------------------------------------------------
	this.aImportCall = pImportCall;
	this.aFileLoader.show_QNode_selector();


}
//----End of Method addNewQNode Definition


//#################################################################
//# Method: importQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               7.10.2014
//# last modifications    7.10.2014
//#################################################################

function importQNode_SDAPScreator(pQNode) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:importQNode()-Call")
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.importQNode();
	//-------------------------------------------------------

    var vCall = this.aImportCall;
	//alert("index.html:70 - Call: "+vCall+" will be called!\nStored in top.vSDAPScreator.aQNodePath");
    eval(vCall);
}

//#################################################################
//# Method: deleteQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               7.10.2014
//# last modifications    7.10.2014
//#################################################################

function deleteQNode_SDAPScreator(pQNodeListPath,pi) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:325 - deleteQNode('"+pQNodeListPath+"',"+pi+")-Call");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.deleteQNode();
	//-------------------------------------------------------
	var vTitle = "";
    var vCall = "vTitle =" + pQNodeListPath + "["+pi+"][2].aVariables['Q_TITLE']";
	eval(vCall);
    //alert("index.html:70 - Call: "+vCall+" will be called!\nStored in top.vSDAPScreator.aQNodeListPath");
    //alert("DELETED QNode"+pi+" with Title\n   '"+vTitle+"'\ndeleteQNode_SDAPScreator() - index.html:281");
    var vCheck = prompt("Do want to delete the QNode"+pi+"? (Y/N)\n   '"+vTitle+"'","Y");
    if (vCheck == "Y") {
     	vCall = pQNodeListPath + ".removeQNode("+pi+")";
     	eval(vCall);
        alert("DELETE: QNode'"+vTitle+"' deleted!");
     };
    var vFilename = "frames/showquestionnaire.html";
    top.setTimeout("top.main.document.location.href='"+vFilename+"'",100);
}

//#################################################################
//# Method: moveQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               7.10.2014
//# last modifications    7.10.2014
//#################################################################

function moveQNode_SDAPScreator(pQNodeListPath,pi,pDestination) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:325 - moveQNode('"+pQNodeListPath+"',"+pi+")-Call");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.moveQNode();
	//-------------------------------------------------------
	var vTitle = "";
    var vCall = "vTitle =" + pQNodeListPath + "["+pi+"][2].aVariables['Q_TITLE']";
	eval(vCall);
    //alert("index.html:70 - Call: "+vCall+" will be called!\nStored in top.vSDAPScreator.aQNodeListPath");
    //alert("DELETED QNode"+pi+" with Title\n   '"+vTitle+"'\nmoveQNode_SDAPScreator() - index.html:281");
    //var vCheck = prompt("Do want to move the QNode"+pi+" to Position "+pDestination+"? (Y/N)\n   '"+vTitle+"'","Y");
    var vCheck = "Y";
    if (vCheck == "Y") {
     	vCall = pQNodeListPath + ".moveQNode("+pi+","+pDestination+")";
     	eval(vCall);
        //alert("vCall="+vCall);
        alert("MOVE: QNode'"+vTitle+"' moved from Pos "+pi+" to " + pDestination + "!");
     };
    //var vFilename = "frames/showquestionnaire.html";
    var vFilename = "frames/editstructure.html";
    top.setTimeout("top.main.document.location.href='"+vFilename+"'",100);
}

//#################################################################
//# Method: loadQNode
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               7.10.2014
//# last modifications    7.10.2014
//#################################################################

function loadQNode_SDAPScreator(pFilename) {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("SDAPScreator:237 - loadQNode('"+pFilename+")\nCALL='"+this.aImportCall+"'");
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.loadQNode();
	//-------------------------------------------------------
    var vFilename =  this.aFileLoader.folder + pFilename;
    top.setTimeout("top.main.document.location.href='"+vFilename+".html'",100);
	//alert("index.html:70 - Call: "+vCall+" will be called!\nStored in top.vSDAPScreator.aQNodePath");
    //eval(vCall);
}

//#################################################################
//# Method: updateQuestionnaire
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               7.10.2014
//# last modifications    7.10.2014
//#################################################################

function updateQuestionnaire_SDAPScreator() {
	//----Debugging------------------------------------------
	// The following alert-Command is useful for debugging
	//alert("sdapscreator.js:updateQuestionnaire()-Call")
	//----Create Object/Instance of SDAPScreator----
	//    var vMyInstance = new SDAPScreator();
	//    vMyInstance.updateQuestionnaire();
	//-------------------------------------------------------

	this.aQuestionnaire.update()

	//alert("index.html:118 - updateQuestionnaire()-Call");

}
//----End of Method updateQuestionnaire Definition


//#################################################################
//# Method: setTimeout
//#    used in Class: SDAPScreator
//#
//# Comment:
//#
//# created               14.10.2014
//# last modifications    14.10.2014
//#################################################################

function setTimeout_SDAPScreator(pEvalStr,pTime) {
    //alert("index.html:75 - setTimeout_SDAPScreator(pEvalStr,pTime)\nTime: "+pTime+"\nEvalStr="+pEvalStr);
	top.setTimeout(pEvalStr,pTime);
}

function Load_Questionnaire_SDAPScreator() {
	return "Load_Questionnaire_SDAPScreator()";
}

function Edit_Structure_SDAPScreator() {
	var vReturn = "";
	vReturn += this.aQuestionnaire.aQuestions.getEdit_Structure_HTML();
	if (this.aQuestionnaire.aQuestions.aChildNodes.rows >0) {
		vReturn += this.aQuestionnaire.aQuestions.aChildNodes.getEdit_Structure_HTML();
	};
	return vReturn;

}

function Show_Questionnaire_SDAPScreator() {
	var vReturn = "";
	vReturn += this.aQuestionnaire.getHTML();
	//alert(this.aQuestionnaire.getHTML());
	return vReturn;
}

function Edit_Questionnaire_SDAPScreator() {
	var vReturn = "";
	vReturn += this.aQuestionnaire.aQuestions.getEditHTML();
	if (this.aQuestionnaire.aQuestions.aChildNodes.rows >0) {
		vReturn += this.aQuestionnaire.aQuestions.aChildNodes.getEditHTML();
	};
	return vReturn;
}

function Save_Questionnaire_SDAPScreator() {
	var vReturn = "Save_Questionnaire_SDAPScreator()";
	return vReturn;
}

function Export_Latex_SDAPScreator() {
	return "Export_Latex_SDAPScreator()";
}

function Export_HTML_SDAPScreator() {
	return "Export_HTML_SDAPScreator()";
	//return this.aFileLoader.show_QNode_links();
}

function Debug_SDAPScreator() {
	return "Debug_SDAPScreator()";
}

//-------------------------------------------------
//----Object Generation----------------------------
//-------------------------------------------------
var vURL_Object       = new URL_Object();
var vSDAPScreator     = new SDAPScreator();
vSDAPScreator.init();
//var vFormGenerator    = new FormGenerator();
vSDAPScreator.load();

setTimeout("")
//-------------------------------------------------

//-------------------------------------------------
//----Object Init----------------------------------
//-------------------------------------------------
//-------------------------------------------------

</SCRIPT>

<SCRIPT LANGUAGE="JavaScript1.2">
<!-- Begin Hiding
function removeParameters(pURL)
//######### if the URL "pURL" contains a parameter, then the parameter after the "?"
//######### will be removed, e.g. "mypath/navigator.html?objectset=documentation/object_set.html"
//######### was converted into "mypath/navigator.html"
//######### IE 4.0 problem local variables are internally handle as global variables
//######### Problems appear, when calling two different functions recursive
{
        var vN = pURL.lastIndexOf("?");
        var lvURL = pURL;
        if (vN >= 0)
                lvURL = pURL.substring(0, vN);
	return lvURL;
}

function extractParameters(pURL)
//######### if the URL "pURL" contains a parameter, then the parameters after the "?"
//######### will be extracte, e.g. "mypath/navigator.html?objectset=documentation/object_set.html"
//######### will return into "?objectset=documentation/object_set.html"
//######### IE 4.0 problem local variables are internally handle as global variables
//######### Problems appear, when calling two different functions recursive
{
        var vN = pURL.lastIndexOf("?");
        var lvParameter = "";
        if (vN >= 0) {
                lvParameter = pURL.substring(vN,pURL.length);
        		//alert("lvParameter="+lvParameter);
        };
		return lvParameter;
}

function extractPath(pURL)
//###### "documentation/technischedoc/startnavigator.html?parameters..."
//###### "documentation/technischedoc/startnavigator.html"  remove parameters
//###### "documentation/technischedoc"                      extract path
{
	//###### pURL conatins a last symbol which is NOT the Slash "/"
        var vN=0;
        top.vDomainPrefix = '';
		var lvURL = removeParameters(pURL);
        vN = lvURL.lastIndexOf("/");
        if (vN >= 0)
                lvURL = lvURL.substring(0, vN);
        if (navigator.appName.indexOf("pera")>0) {
        	vN = lvURL.lastIndexOf("ile://localhost");
        	if (vN >= 0) {
                lvURL = lvURL.substring(16, lvURL.length);
                top.vDomainPrefix = "file://localhost";
        	};
        	vN = lvURL.lastIndexOf("ile://");
        	if (vN >= 0) {
            	    lvURL = lvURL.substring(7, lvURL.length);
                	top.vDomainPrefix = "file://";
        	}
        };
    //alert("cstring.js:116 - extractPath() = "+lvURL);
	return lvURL;
}
//-----------------------------------------------------------------------------------------
	var vBasicPath = extractPath(document.location.href) + "/frames/";
	// alert("vBasicPath = "+vBasicPath)
	setTimeout("top.menu.document.href=top.vBasicPath+'menue.html'",1000);
//-----------------------------------------------------------------------------------------
// End Hiding -->
</SCRIPT>
</head>
  <frameset cols="180,*" bordercolor="#4444AA">
      <frame src="frames/menu.html" name="menu" scrolling="AUTO">
      <frame src="frames/empty.html" name="main" scrolling="AUTO">
   </frameset>
<noframes><body bgcolor="#EEEEEE"  onLoad="alert('Browser cannot display FRAMES')">

If you can see this text, your browser is not able to display frames.
Use e.g. <a href="http://www.mozilla.org">Mozilla Firefox</a>

</body></noframes>
</html>
